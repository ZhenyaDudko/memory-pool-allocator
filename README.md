# Memory pool allocator

## Least frequent recently used

Этот алгоритм применяется в областях, где требуется сбалансировать сохранение в кеше как часто используемых, так и недавно использованных элементов. Существуют разные вариации, здесь использована одна из простых.

Кеш поделён на две области: привилегированная и непривилегированная. Привилегированная моделируется, как LRU список, а непривилегированная - как очередь FIFO.

Поиск производится сначала в привилегированной очереди (если элемент найден - он перемещается в её начало), затем - в непривилегированной (если элемент найден - он перемещается в привилегированную очередь).
Если элемент не найден, он добавляется в непривилегированную очередь.

Вытеснение из привилегированной очереди происходит так:
* удаляется самый редко используемый (последний) элемент из очереди
* он помещается в начало непривилегированной очереди (возможно, вызывая вытеснение там)

Для непривилегированной очереди новые элементы добавляются в начало, вытесненные удаляются с конца.

### Допущение в реализации
В реализации кеша допустимо предполагать, что все хранимые там объекты имеют в иерархии наследования предка, задаваемого шаблонным параметром KeyProvider,
который, в свою очередь, имеет оператор равенства с ключом (задаваемым шаблонным параметром Key).

## Pool аллокатор с поддержкой нескольких типов объектов

Реализован pool аллокатор с возможностью размещать объекты нескольких разных типов (разного размера).
Возможны разные подходы к реализации такой идеи, тут использован вариант, напоминающий упрощённую модель [SLAB
аллокатора](https://en.wikipedia.org/wiki/Slab_allocation):
* пул состоит из набора блоков (slab)
* каждый блок используется для выделения памяти для объектов одного размера
* все блоки имеют одинаковый размер, указываемый при создании пула
* если в блоке кончается место, то попытка выделения памяти под объект соответствующего размера завершается неудачей

Память под объект выделяется в блоке, выделенном для размера такого объекта.

Основным преимуществом такой схемы (в рамках задач выделения памяти под объекты разного размера) является отсутствие фрагментации. 
